# 概述
分布式数据库可分为两种风格：一是NewSQL，代表系统Google spanner，是原生分布式数据库；一是单体数据库演进而成，为Proxy风格，代表系统PostgreSQL-XC

# Proxy风格
## 关系型数据库架构
![[Pasted image 20240424200147.png]]
1. 客户端通讯管理器：管理用户连接
2. 进程管理器：客户端操作由进程或线程完成
3. 查询处理器：词法/语法解析 -> plan cache -> resolver -> transformer & optimizer -> executor
4. 事务存储管理器：4部分：
	1. 访问方式：数据在磁盘的存储形式
	2. 锁管理：并发控制
	3. 日志管理：持久化
	4. 缓存管理：I/O数据的缓存控制
5. 共享组件和工具
## 单体数据库演进
1. 为了应对高并发情况，最常用的方法就是分库分表，即将大表数据分散在不同的数据库并切分到不同表上（本质上是增加了路由功能，因此叫Proxy层）
2. 为了支持事务的跨节点操作，又为路由层添加新功能，升级为协调节点
3. 再添加全局时钟保证操作一致性，这样就完成一个Proxy架构的分布式数据库

# New-SQL
1. 可称为原生分布式数据库，每个组件设计之初就是为分布式服务
2. 高可靠机制：不采用主从复制，而是使用paxos和raft等共识算法
3. 存储引擎：使用LSM树替代B+树